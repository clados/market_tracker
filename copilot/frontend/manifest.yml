name: frontend
type: Load Balanced Web Service

image:
  build:
    dockerfile: ./frontend/Dockerfile
    context: .
  port: 5173

cpu: 512
memory: 1024
count: 1
exec: true

http:
  path: "/"
  port: 5173
  startup_timeout: 300s
  healthcheck:
    path: "/"
    success_codes: "200-399"
    grace_period: 300s
    interval: 30s
    timeout: 10s
    healthy_threshold: 2
    unhealthy_threshold: 5

network:
  vpc:
    placement: public
    security_groups:
      - from_cfn: ${COPILOT_APPLICATION_NAME}-${COPILOT_ENVIRONMENT_NAME}-marketdbSecurityGroup

environments:
  staging:
    variables:
      NODE_ENV: production
      VITE_USE_MOCK_DATA: false
      VITE_API_BASE_URL: http://backend.${COPILOT_ENVIRONMENT_NAME}.${COPILOT_APPLICATION_NAME}.local:8000 