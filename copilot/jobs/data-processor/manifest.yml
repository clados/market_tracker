name: data-processor
type: Scheduled Job

# Job configuration
image:
  build: 
    dockerfile: ./jobs/data-processor/Dockerfile
    context: .
  port: 8080

# Schedule configuration (runs every 6 hours)
schedule:
  cron: "0 */6 * * *"

# Environment variables
variables:
  ENVIRONMENT: ${ENVIRONMENT}
  KALSHI_API_BASE_URL: https://api.elections.kalshi.com/trade-api/v2
  JOB_INTERVAL_HOURS: 6
  DATABASE_URL: ${RDS_DATABASE_URL}

# Resource configuration
cpu: 512
memory: 1024
timeout: 30m

# Network configuration
network:
  vpc:
    placement: private

# Secrets
secrets:
  KALSHI_KEY_ID: /kalshi-market-tracker/kalshi-key-id

# Addon dependencies
addons:
  - name: rds 